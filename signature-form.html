<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<title>فرم امضای قرارداد رها سرور</title>
<style>
  body { font-family: sans-serif; direction: rtl; padding: 20px; background: #f7f7f7; }
  .box { background: #fff; padding: 20px; border-radius: 12px; max-width: 700px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
  h2 { margin-top: 0; }
  #signature-pad { border: 2px solid #444; border-radius: 10px; width: 100%; height: 220px; touch-action: none; }
  button { padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; margin-top: 10px; }
  .send-btn { background: #2e7d32; color: #fff; }
  .clear-btn { background: #c62828; color: #fff; }
</style>
</head>
<body>
<div class="box">
  <h2>قرارداد پکیج ویژه رها سرور</h2>
  <p>
    این قرارداد فی‌مابین مجموعه رها سرور و مشتری محترم جهت خرید و تحویل پکیج ویژه رها سرور تنظیم گردیده است.
    <br><br>
    <b>۱. موضوع قرارداد:</b> ارائه پکیج ویژه رها سرور.
    <br>
    <b>۲. پرداخت:</b> به صورت درب منزل.
    <br>
    <b>۳. زمان تحویل:</b> ۳ تا ۵ روز کاری.
    <br>
    <b>۴. تعهدات مشتری:</b> همکاری در تحویل و پرداخت در محل.
  </p>

  <h3>امضای مشتری:</h3>
  <canvas id="signature-pad"></canvas>
  <button class="clear-btn" type="button">پاک کردن امضا</button>

  <form id="sendForm" action="https://formspree.io/f/xgvgydgb" method="POST">
    <input type="hidden" name="signature" id="signature-input">
    <button class="send-btn" type="submit">ارسال قرارداد امضاشده</button>
  </form>
</div>

<script>
  const canvas = document.getElementById("signature-pad");
  const ctx = canvas.getContext("2d");
  let drawing = false;

  function resizeCanvas() {
    const data = canvas.toDataURL();
    canvas.width = canvas.offsetWidth;
    canvas.height = 220;
    const img = new Image();
    img.src = data;
    img.onload = () => ctx.drawImage(img, 0, 0);
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  function getPointerPos(e) {
    const rect = canvas.getBoundingClientRect();
    let x = 0, y = 0;
    if (e.touches) {
      x = e.touches[0].clientX - rect.left;
      y = e.touches[0].clientY - rect.top;
    } else {
      x = e.clientX - rect.left;
      y = e.clientY - rect.top;
    }
    return {x, y};
  }

  canvas.addEventListener('mousedown', () => drawing = true);
  canvas.addEventListener('mouseup', () => { drawing = false; ctx.beginPath(); });
  canvas.addEventListener('mousemove', draw);

  canvas.addEventListener('touchstart', (e) => { drawing = true; draw(e); });
  canvas.addEventListener('touchend', () => { drawing = false; ctx.beginPath(); });
  canvas.addEventListener('touchmove', draw);

  function draw(e) {
    if (!drawing) return;
    e.preventDefault();
    const pos = getPointerPos(e);
    ctx.lineWidth = 1.5;  // تغییر ضخامت قلم به 1.5
    ctx.lineCap = 'round';
    ctx.strokeStyle = '#000';
    ctx.lineTo(pos.x, pos.y);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(pos.x, pos.y);
  }

  document.querySelector('.clear-btn').addEventListener('click', () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.beginPath();
  });

  document.getElementById('sendForm').addEventListener('submit', function(e){
    const dataURL = canvas.toDataURL();
    document.getElementById('signature-input').value = dataURL;
  });
</script>
</body>
</html>
